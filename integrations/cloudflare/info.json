{
  "name": "Cloudflare",
  "description": "Deploy to Cloudflare Workers with Vite",
  "type": "deployment",
  "phase": "integration",
  "category": "deploy",
  "modes": ["file-router", "code-router"],
  "priority": 10,
  "link": "https://workers.cloudflare.com/",
  "partnerId": "cloudflare",

  "dependsOn": [],
  "exclusive": ["deploy"],

  "hooks": [
    {
      "type": "vite-plugin",
      "import": "import { cloudflare } from '@cloudflare/vite-plugin'",
      "code": "cloudflare({ viteEnvironment: { name: 'ssr' } })"
    }
  ],

  "packageAdditions": {
    "scripts": {
      "preview": "npm run build && vite preview",
      "deploy": "npm run build && wrangler deploy",
      "cf-typegen": "wrangler types"
    }
  }
}
